<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Twitch.js documentation</title>
    <link rel="stylesheet" href="/twitch-chat-client/static/css/style.css" />
</head>
<body>
<div id="root"><div class="App"><div class="NavMenu"><a class="NavMenuItem" href="/twitch-chat-client/">Welcome</a><div class="NavMenuGroup"><h2 class="NavMenuGroup__title">Basic usage</h2><div class="NavMenuGroup__items"><a class="NavMenuItem" href="/twitch-chat-client/docs/basic-usage/getting-started.html">Getting started</a><a class="NavMenuItem" href="/twitch-chat-client/docs/basic-usage/connecting-to-chat.html">Connecting to Chat</a><a class="NavMenuItem NavMenuItem--active" aria-current="page" href="/twitch-chat-client/docs/basic-usage/listening-to-events.html">Listening to events</a></div></div><div class="NavMenuGroup"><h2 class="NavMenuGroup__title">Classes</h2><div class="NavMenuGroup__items"><a class="NavMenuItem" href="/twitch-chat-client/reference/classes/ChatClient.html">ChatClient</a><a class="NavMenuItem" href="/twitch-chat-client/reference/classes/ChatUser.html">ChatUser</a><a class="NavMenuItem" href="/twitch-chat-client/reference/classes/TwitchPrivateMessage.html">TwitchPrivateMessage</a></div></div><div class="NavMenuGroup"><h2 class="NavMenuGroup__title">Interfaces</h2><div class="NavMenuGroup__items"><a class="NavMenuItem" href="/twitch-chat-client/reference/interfaces/ChatCommunitySubInfo.html">ChatCommunitySubInfo</a><a class="NavMenuItem" href="/twitch-chat-client/reference/interfaces/ChatRaidInfo.html">ChatRaidInfo</a><a class="NavMenuItem" href="/twitch-chat-client/reference/interfaces/ChatRitualInfo.html">ChatRitualInfo</a><a class="NavMenuItem" href="/twitch-chat-client/reference/interfaces/ChatSubGiftInfo.html">ChatSubGiftInfo</a><a class="NavMenuItem" href="/twitch-chat-client/reference/interfaces/ChatSubInfo.html">ChatSubInfo</a></div></div></div><div class="App__main"><main class="App__content"><div class="PageHeader"><h1>Listening to events</h1></div><div class="PageContent"><p>After you established a connection to the Twitch chat server and joined at least one channel, you can listen to events:</p><pre style="display:block;overflow-x:auto;padding:0.5em;background:#2b2b2b;color:#bababa"><code><span style="color:#cb7832">const</span> followAgeListener = chatClient.onPrivmsg(<span>(<span style="color:#b9b9b9">channel: <span style="color:#e0c46c">string</span>, user: <span style="color:#e0c46c">string</span>, message: <span style="color:#e0c46c">string</span>, msg: TwitchPrivateMessage</span>) =&gt;</span> {
	<span style="color:#cb7832">if</span> (message === <span style="color:#6a8759">&#x27;!followage&#x27;</span>) {
		<span style="color:#cb7832">const</span> follow = <span style="color:#cb7832">await</span> twitchClient.users.getFollowedChannel(msg.userInfo.userId, msg.channelId);

		<span style="color:#cb7832">if</span> (follow) {
			<span style="color:#cb7832">const</span> currentTimestamp = <span style="color:#e0c46c">Date</span>.now();
			<span style="color:#cb7832">const</span> followStartTimestamp = follow.followDate.getTime();
			chatClient.say(channel, <span style="color:#6a8759">`@<span style="color:#e0c46c">${user}</span> You have been following for <span style="color:#e0c46c">${secondsToDuration((currentTimestamp - followStartTimestamp) / 1000)}</span>!`</span>);
		} <span style="color:#cb7832">else</span> {
			chatClient.say(channel, <span style="color:#6a8759">`@<span style="color:#e0c46c">${user}</span> You are not following!`</span>);
		}
	}
});

<span style="color:#7f7f7f">// later, when you don&#x27;t need this command anymore:</span>
chatClient.removeListener(followAgeListener);
</code></pre></div></main></div></div></div>
</body>
</html>
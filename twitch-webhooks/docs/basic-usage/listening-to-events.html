<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Twitch.js documentation</title>
    <link rel="stylesheet" href="/twitch-webhooks/static/css/style.css" />
    <style id="server-side-styles">.c0110 {
  color: #b9b9b9;
  padding: 1em;
  position: relative;
  border-bottom: 1px solid #444;
  background-color: #242424;
}
.c0110 h1 {
  margin: 0;
  display: inline;
  font-size: 1.5em;
  font-weight: normal;
}
.c0110 p {
  margin: 0;
}
.c0111 {
  padding: 1em;
}
.c0111 h2 {
  margin: 0;
}
.c014 {
  min-height: 100%;
  border-right: 1px solid #444;
}
.c017 {
  color: #b9b9b9;
  display: block;
}
.c017:not(:first-child) {
  margin-top: 1em;
}
.c018 {
  margin: 0;
  height: 1em;
  padding: .25em .5em .25em .75em;
  font-size: 1.1em;
  line-height: 1em;
  font-weight: bold;
  text-transform: uppercase;
}
.c019 > a {
  padding-left: 1.25em;
}
.c015 {
  color: #b9b9b9;
  height: 1em;
  padding: .5em;
  display: block;
  overflow: hidden;
  transition: .3s background-color ease-in-out, .3s border-left-color ease-in-out;
  line-height: 1em;
  border-left: .25em solid transparent;
  text-overflow: ellipsis;
  text-decoration: none;
}
.c015:hover {
  background-color: #333333;
}
.c016 {
  border-color: #647d0f;
  background-color: #242424;
}
.c016:hover {
  border-left-color: #88ab14;
}
.c011 {
  width: 100%;
  display: flex;
  min-height: 100%;
  flex-direction: row;
}
.c012 {
  width: 250px;
}
.c013 {
  flex: 1;
}
.c013 a {
  color: rgb(148, 148, 148);
  font-weight: bold;
  text-decoration: none;
}</style>
</head>
<body>
<div id="root"><div class="c011"><div class="c014 c012"><a class="c015" href="/twitch-webhooks/">Welcome</a><div class="c017"><h2 class="c018">Basic usage</h2><div class="c019"><a class="c015" title="Getting started" href="/twitch-webhooks/docs/basic-usage/getting-started.html">Getting started</a><a aria-current="page" class="c015 c016" title="Listening to events" href="/twitch-webhooks/docs/basic-usage/listening-to-events.html">Listening to events</a></div></div><div class="c017"><h2 class="c018">Classes</h2><div class="c019"><a class="c015" title="FollowsFromUserSubscription" href="/twitch-webhooks/reference/classes/FollowsFromUserSubscription.html">FollowsFromUserSubscription</a><a class="c015" title="FollowsToUserSubscription" href="/twitch-webhooks/reference/classes/FollowsToUserSubscription.html">FollowsToUserSubscription</a><a class="c015" title="StreamChangeSubscription" href="/twitch-webhooks/reference/classes/StreamChangeSubscription.html">StreamChangeSubscription</a><a class="c015" title="Subscription" href="/twitch-webhooks/reference/classes/Subscription.html">Subscription</a><a class="c015" title="UserChangeSubscription" href="/twitch-webhooks/reference/classes/UserChangeSubscription.html">UserChangeSubscription</a><a class="c015" title="WebHookListener" href="/twitch-webhooks/reference/classes/WebHookListener.html">WebHookListener</a></div></div><div class="c017"><h2 class="c018">Interfaces</h2><div class="c019"><a class="c015" title="WebHookListenerCertificateConfig" href="/twitch-webhooks/reference/interfaces/WebHookListenerCertificateConfig.html">WebHookListenerCertificateConfig</a><a class="c015" title="WebHookListenerComputedConfig" href="/twitch-webhooks/reference/interfaces/WebHookListenerComputedConfig.html">WebHookListenerComputedConfig</a><a class="c015" title="WebHookListenerConfig" href="/twitch-webhooks/reference/interfaces/WebHookListenerConfig.html">WebHookListenerConfig</a><a class="c015" title="WebHookListenerReverseProxyConfig" href="/twitch-webhooks/reference/interfaces/WebHookListenerReverseProxyConfig.html">WebHookListenerReverseProxyConfig</a></div></div></div><div class="c013"><main><div class="c0110"><h1>Listening to events</h1></div><div class="c0111"><p>First, you have to create an instance of the core Twitch client, as outlined in <a href="https://d-fischer.github.io/twitch/docs/basic-usage/creating-instance.html">its own documentation</a>.</p><p>Then, you create a new <a href="/twitch-webhooks/reference/classes/WebHookListener.html">WebHookListener</a> instance using the core client:</p><pre style="display:block;overflow-x:auto;padding:0.5em;background:#2b2b2b;color:#bababa"><code><span style="color:#cb7832">import</span> WebHookListener <span style="color:#cb7832">from</span> <span style="color:#6a8759">&#x27;twitch-webhooks&#x27;</span>;

<span style="color:#cb7832">const</span> listener = <span style="color:#cb7832">await</span> WebHookListener.create(twitchClient, {port: <span style="color:#6896ba">8090</span>});
listener.listen();
</code></pre><p>After that, you can subscribe to all supported events using this listener:</p><pre style="display:block;overflow-x:auto;padding:0.5em;background:#2b2b2b;color:#bababa"><code><span style="color:#cb7832">import</span> { HelixStream } <span style="color:#cb7832">from</span> <span style="color:#6a8759">&#x27;twitch&#x27;</span>;

<span style="color:#cb7832">const</span> subscription = <span style="color:#cb7832">await</span> listener.subscribeToStreamChanges(userId, <span style="color:#cb7832">async</span> (stream?: HelixStream) =&gt; {
	<span style="color:#cb7832">if</span> (stream) {
		<span style="color:#e0c46c">console</span>.log(<span style="color:#6a8759">`<span style="color:#e0c46c">${stream.userDisplayName}</span> just went live with title: <span style="color:#e0c46c">${stream.title}</span>`</span>);
	} <span style="color:#cb7832">else</span> {
		<span style="color:#7f7f7f">// no stream, no display name</span>
		<span style="color:#cb7832">const</span> user = <span style="color:#cb7832">await</span> twitchClient.helix.users.getUserById(userId);
		<span style="color:#e0c46c">console</span>.log(<span style="color:#6a8759">`<span style="color:#e0c46c">${user.displayName}</span> just went offline`</span>);
	}
});
</code></pre><p>When you don&#x27;t want to listen to a particular event anymore, you just stop its subscription:</p><pre style="display:block;overflow-x:auto;padding:0.5em;background:#2b2b2b;color:#bababa"><code>subscription.stop();
</code></pre></div></main></div></div></div>
</body>
</html>